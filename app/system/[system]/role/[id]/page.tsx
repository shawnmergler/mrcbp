import { prisma } from '@/lib/prisma'; import Link from 'next/link'; export default async function RolePage({ params }:{ params:{ system:'PROJECT_MANAGEMENT'|'SITE_SUPERVISION', id:string } }){ const role = await prisma.role.findUnique({ where: { id: Number(params.id) } }); const lessons = await prisma.lesson.findMany({ where: { system: params.system, roleId: Number(params.id) }, include: { division: true } }); if(!role) return <div className='card'>Role not found.</div>; return (<div className='space-y-4'><div className='card'><h1 className='text-2xl font-bold'>{role.level}. {role.name}</h1><p className='text-sm text-gray-600'>{params.system.replace('_',' ')} track</p></div><div className='grid-cards'>{lessons.map(l=>(<div key={l.id} className='card'><div className='font-semibold'>{l.title}</div><div className='text-xs text-gray-500 mt-1'>Division {String(l.division.csiCode).padStart(2,'0')} â€“ {l.division.name}</div><Link href={`/lesson/${l.slug}`} className='btn btn-primary mt-3'>Open</Link></div>))}</div></div>); }
